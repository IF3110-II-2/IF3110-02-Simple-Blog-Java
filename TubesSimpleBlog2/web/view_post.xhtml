<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:c="http://java.sun.com/jsp/jstl/core"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>View Post</title>
        <meta name="viewport" content="width=device-width"/>
                <link rel="stylesheet" href="style.css" type="text/css" />
    </h:head>
	<h:body>
		<div class="header">Simple Blog </div>
        <div id="nav"> User Management | See Unpublished | Add Post | Logout   </div>
        <div id="main">
		<h1>View Post</h1>
		<hr/>
		<h:form>
		<h:outputText id="firstNameText" value="Sample Bean:"></h:outputText>
         <br/><h:outputText id="accountName" value="#{sampleBean.nama}"></h:outputText>
         <br/><h:outputText id="accountRole" value="#{sampleBean.role}"></h:outputText>
		</h:form>
		#{viewPost.showPage(param['idpost'])}
		#{listKomentar.showPage(param['idpost'])}
		<br/><h:outputText value="#{viewPost.postId}"></h:outputText> 
        <br/><h2> #{viewPost.judul}</h2>      
		<br/><h:outputText value="#{viewPost.konten}"></h:outputText>
         <br/> <h:outputText value="#{viewPost.tanggal}"></h:outputText>
		 
		<p>           
        <h:form rendered="#{sampleBean.role ne 'editor'}" id="formcomment" onsubmit="return validasiEmail()">
			Nama: <h:inputText id="name" value="#{komentar.nama}"></h:inputText>
    		Email : <h:inputText id="email" value="#{komentar.email}"></h:inputText>
            Komentar : <h:inputText id="koment" value="#{komentar.komentar}"></h:inputText>  
			<h:commandButton value="Add my comment" action="#{komentar.addComment()}" onclick="return check();">
				<f:ajax execute="name" render="output" />
				<f:ajax execute="email" render="output2" />
				<f:ajax execute="koment" render="output3" />
			</h:commandButton>  		
			<h2><h:outputText id="output" value="#{komentar.nama}" /></h2>
			<h:outputText id="output2" value="#{komentar.email}" /><br/>
			<h:outputText id="output3" value="#{komentar.komentar}" />
        </h:form>
            
            
        </p>
        <h:form>
			<c:forEach items="#{listKomentar.arrKomentar}" var="komen">
				<br/><h:outputText value="#{komen.commentid}"></h:outputText> 
				<br/><h:outputText value="#{komen.nama}"></h:outputText> 
				<br/><h:outputText value="#{komen.tanggal}"></h:outputText>
				<br/><h:outputText value="#{komen.komentar}"></h:outputText>
				<div class="hr"> <hr></hr></div>
			</c:forEach>
        </h:form>
        </div>
        
		<div id="nav">
        <form action="Login" method="post">
             <br/>Username : <input type = "text" name="uname"/>
             <br/>Password : <input type ="password" name="pass"/>
             <br/><input type="submit" value="Login"/>
        </form></div>
        
		<div id="footer">
            rita | cilvia | linda </div>
        
        <script type="text/javascript">

function validasiEmail(){
var mail= document.formcomment["formcomment:email"].value; 
if(mail.match(/^[_A-Za-z0-9-]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9-]+)*(\.[A-Za-z]+)$/g))
{return true;}
else{
alert ("Salah Email");
return false;}}

        </script>   

    </h:body>
</html>

